[pytest]
filterwarnings =
    ignore:pkg_resources is deprecated as an API:DeprecationWarning

; Async test mode for WebSocket subscriptions
asyncio_mode = auto

; Coverage configuration: tracks entity and core system coverage
addopts =
    --showlocals
    --strict-markers
    --cov=mytower.game.entities
    --cov=mytower.game.core
    --cov=mytower.api
    --cov=mytower.tests.test_protocols
    --cov-report=xml
    --cov-report=html
    --cov-report=term-missing
    --cov-branch
    --cov-context=test

; Test markers
markers =
    asyncio: marks tests as async (deselect with '-m "not asyncio"')

;coverage.py does not read configuration from pytest.ini; move [coverage:run] settings to a supported file (e.g., .coveragerc, setup.cfg, or pyproject.toml) so they take effect.
[coverage:run]
parallel = true
concurrency = multiprocessing
