# MyTower Web Frontend Configuration
# Copy this file to `.env` and customize for your deployment environment

# ============================================================================
# REQUIRED: Backend Server Configuration
# ============================================================================
#
# The frontend needs to know where the backend server is running.
# These values are BAKED INTO the JavaScript bundle at build time.
#
# IMPORTANT: You must rebuild (`./build-web.sh`) after changing these values!

# Backend server IP address or hostname
#
# WHEN TO SET THIS:
# - AWS Deployment (S3 frontend + EC2 backend): SET to EC2 public IP
#   Example: VITE_SERVER_HOST=13.59.128.67
#
# - Local development: SET to localhost
#   Example: VITE_SERVER_HOST=localhost
#
# - CloudFront + API Gateway (same domain): LEAVE UNSET
#   (Frontend will use window.location.hostname)
#
# If unset, defaults to the domain serving the frontend (window.location.hostname)
# This WON'T WORK for S3 static hosting with separate backend!
#
VITE_SERVER_HOST=

# Backend server port
# Default: 8000 (standard MyTower backend port)
VITE_SERVER_PORT=8000

# ============================================================================
# Backend Configuration (for backend/headless mode)
# ============================================================================

# Command queue size for the game bridge (thread-safe command processing)
# Controls how many commands can be queued before blocking/rejecting new commands
#
# Considerations:
# - Higher values: Better burst handling, more memory usage
# - Lower values: Less memory, potential blocking under high load
# - Monitor logs for "Command queue is full" warnings
#
# Default: 100
# MYTOWER_COMMAND_QUEUE_SIZE=100

# ============================================================================
# Configuration Examples for Different Scenarios
# ============================================================================
#
# AWS Production (S3 frontend + EC2 backend):
#   VITE_SERVER_HOST=13.59.128.67  # Your EC2 public IP
#   VITE_SERVER_PORT=8000
#
#   Steps:
#   1. Deploy backend to EC2, get public IP
#   2. Copy .env.example to .env
#   3. Set VITE_SERVER_HOST to EC2 IP
#   4. Run ./build-web.sh (bakes IP into bundle)
#   5. Run ./deploy-web-to-aws.sh (uploads to S3)
#
# Local Development (same machine):
#   VITE_SERVER_HOST=localhost
#   VITE_SERVER_PORT=8000
#
# Local Development (separate machines):
#   VITE_SERVER_HOST=192.168.1.100  # Backend machine's local IP
#   VITE_SERVER_PORT=8000
#
# Docker Compose:
#   VITE_SERVER_HOST=backend  # Service name from docker-compose.yml
#   VITE_SERVER_PORT=8000
#
# ============================================================================
# Important Notes
# ============================================================================
#
# 1. BUILD-TIME VARIABLES: These are BAKED INTO the JavaScript bundle!
#    - Changing .env after building won't affect deployed code
#    - You MUST rebuild after changing these values
#
# 2. VITE_ PREFIX: Only variables starting with VITE_ are exposed to the browser
#    - This is a security feature to prevent leaking backend secrets
#
# 3. NOT COMMITTED: .env files are gitignored
#    - Each developer/deployment needs their own .env file
#    - Copy from .env.example and customize
#
# 4. PROTOCOL AUTO-DETECTION: http/https and ws/wss are automatic
#    - HTTP page → uses ws:// for WebSockets
#    - HTTPS page → uses wss:// for WebSockets
#    - You only specify the HOST and PORT
#
# 5. S3 STATIC HOSTING USES HTTP:
#    - S3 website endpoints only support HTTP (not HTTPS)
#    - Access via: http://bucket-name.s3-website.REGION.amazonaws.com
#    - Backend can be HTTP or HTTPS (WebSocket will match)
